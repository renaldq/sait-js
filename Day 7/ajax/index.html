<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Ajax example</title>

	</head>

	<body>



        <script>

            fetch('http://jsonplaceholder.typicode.com/users')
            .then(function(response) {
                return response.json();
            })

            .then(function(data) {
                for (var i = 0; i < data.length; i++) {
                    console.log(data[i].username);
                }
            })

            // using Fetch API to Send Data
            // 1. Create content that you want to send
            var user = {
                username: "htovey",
                id: 780
            }

            // fetch the url
            fetch('https://jsonplaceholder.typicode.com/users', {

                // set your method
                method: 'POST',

                // set your headers
                headers: {
                    'Content-Type': 'application/json'
                },

                body: JSON.stringify(user)
            })
            
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                console.log(data);
            })



            // how to handle errors with fetch API
            fetch('https://jsonplaceholder.typicode.com/404')
            .then(function(response) {
                if(!response.ok) {
                    throw Error(response.statusText);
                }

                return response.json();
            })
            .then(function(data) {
                console.log(data);
            })
            .catch(function(error) {
                console.log("The error:", error);
            })

        </script>

	</body>
</html>